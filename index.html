<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>DevBug FC vX ‚Äî Sender</title>
  <style>
    body { background:#000; color:#fff; font-family: "Segoe UI", Roboto, Arial; padding:32px; text-align:center; }
    h1 { color:#ff3333; margin-bottom:18px; }
    .card { background:#070707; border:1px solid #333; padding:18px; border-radius:10px; max-width:720px; margin: 16px auto; }
    input, textarea, button { display:block; margin:10px auto; width:90%; max-width:420px; padding:12px; border-radius:8px; border:1px solid #222; background:#0b0b0b; color:#fff; box-sizing:border-box; }
    button { background:#ff0000; color:#fff; border:none; cursor:pointer; }
    small.note { color:#aaa; display:block; margin-top:6px; }
    pre { text-align:left; white-space:pre-wrap; word-break:break-word; background:#050505; padding:12px; border-radius:8px; color:#ddd; max-width:720px; margin:12px auto; }
    label { display:block; margin-top:6px; color:#ddd; }
  </style>
</head>
<body>
  <h1>üí• DevBug FC vX ‚Äî Sender</h1>

  <div class="card">
    <h2>Android</h2>
    <form id="androidForm">
      <label>Phone number (digits only, with country code):</label>
      <input id="androidPhone" type="tel" placeholder="e.g. 2349012345678" required pattern="[0-9]{7,15}">
      <label>Note (optional):</label>
      <textarea id="androidNote" rows="3" maxlength="400" placeholder="Short safe note"></textarea>
      <label>Admin token (paste):</label>
      <input id="adminTokenA" type="text" placeholder="ADMIN_TOKEN (required)"/>
      <small class="note">Admin token is required to send bug.</small>
      <button type="submit">üòà Send Android</button>
    </form>
  </div>

  <div class="card">
    <h2>iOS</h2>
    <form id="iosForm">
      <label>Phone number (digits only, with country code):</label>
      <input id="iosPhone" type="tel" placeholder="e.g. 2349012345678" required pattern="[0-9]{7,15}">
      <label>Note (optional):</label>
      <textarea id="iosNote" rows="3" maxlength="400" placeholder="Short safe note"></textarea>
      <label>Admin token (paste):</label>
      <input id="adminTokenI" type="text" placeholder="ADMIN_TOKEN (required)"/>
      <small class="note">Admin token is required to send bug.</small>
      <button type="submit">üí£ Send iOS</button>
    </form>
  </div>

  <div class="card">
    <h2>Result</h2>
    <pre id="result">use wisely ski.</pre>
  </div>

<script>
  // === CONFIG ===
  // For local testing set to "http://localhost:3000"
  // When deployed set to your Render backend URL, e.g. "https://your-backend.onrender.com"
  const BACKEND_URL = "http://localhost:3000";
  // ==============

  function show(obj){ document.getElementById('result').textContent = JSON.stringify(obj, null, 2); }
  function normalize(n){ return String(n).replace(/\D/g,''); }

  async function send(number, note, adminToken) {
    const body = { number: normalize(number), note: String(note || '') };
    const res = await fetch(BACKEND_URL + '/send', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer ' + (adminToken || '')
      },
      body: JSON.stringify(body)
    });
    return res.json();
  }

  document.getElementById('androidForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const num = document.getElementById('androidPhone').value.trim();
    const note = document.getElementById('androidNote').value.trim().slice(0,400);
    const token = document.getElementById('adminTokenA').value.trim();
    if (!/^[0-9]{7,15}$/.test(num)) return alert('Enter a valid number (digits only).');
    if (!token) return alert('ADMIN_TOKEN required.');
    show({ status: 'sending...' });
    try {
      const r = await send(num, `Android test: ${note}`, token);
      show(r);
    } catch (err) {
      show({ ok:false, error: String(err) });
    }
  });

  document.getElementById('iosForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const num = document.getElementById('iosPhone').value.trim();
    const note = document.getElementById('iosNote').value.trim().slice(0,400);
    const token = document.getElementById('adminTokenI').value.trim();
    if (!/^[0-9]{7,15}$/.test(num)) return alert('Enter a valid number (digits only).');
    if (!token) return alert('ADMIN_TOKEN required.');
    show({ status: 'sending...' });
    try {
      const r = await send(num, `iOS test: ${note}`, token);
      show(r);
    } catch (err) {
      show({ ok:false, error: String(err) });
    }
  });
</script>
</body>
</html>
<footer style="margin-top:40px; padding:20px; color:#888; font-size:14px; border-top:1px solid #222;">
  <p>‚ö†Ô∏è Use it responsibl ski.</p>
  <p>Made with ‚ù§Ô∏è by Mr Dev ‚Äî ¬© 2025 DevBug FC vX</p>
  
  <p>
    <a href="https://wa.me/2349164624021" target="_blank" style="color:#25D366; text-decoration:none; display:inline-flex; align-items:center; gap:8px;">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#25D366" viewBox="0 0 448 512">
        <path d="M380.9 97.1C339 55.1 283.2 32 224 32 100.3 32 0 132.3 0 256c0 45 11.7 88.8 34 127.3L0 480l100.7-32.9C138.2 469.8 180.7 480 224 480c123.7 0 224-100.3 224-224 0-59.2-23.1-115-67.1-158.9zM224 438.5c-41.2 0-81.5-11.1-116.5-32.1l-8.3-4.9-59.8 19.5L61 361.2l-5.3-8.4c-20.3-32-31-69.1-31-107 0-111.6 
